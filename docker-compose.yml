version: '3.6'
services:
  postgres:
    image: postgres:12
    restart: always
    volumes:
    - db_data:/var/lib/postgresql/data
    environment:
      POSTGRES_PASSWORD: postgrespassword
  graphql-engine:
    image: hasura/graphql-engine:v2.18.0
    ports:
    - "8080:8080"
    depends_on:
    - "postgres"
    restart: always
    environment:
      ## postgres database to store Hasura metadata
      HASURA_GRAPHQL_METADATA_DATABASE_URL: postgres://postgres:postgrespassword@postgres:5432/postgres
      ## this env var can be used to add the above postgres database to Hasura as a data source. this can be removed/updated based on your needs
      PG_DATABASE_URL: postgres://postgres:postgrespassword@postgres:5432/postgres
      ## enable the console served by server
      HASURA_GRAPHQL_ENABLE_CONSOLE: "true" # set to "false" to disable console
      ## enable debugging mode. It is recommended to disable this in production
      HASURA_GRAPHQL_DEV_MODE: "true"
      HASURA_GRAPHQL_ENABLED_LOG_TYPES: startup, http-log, webhook-log, websocket-log, query-log
      #HASURA_GRAPHQL_JWT_SECRET: '{"type": "RS512", "key": "-----BEGIN CERTIFICATE-----\nMIIDBzCCAe+gAwIBAgIJXVcmVc2kG4H5MA0GCSqGSIb3DQEBCwUAMCExHzAdBgNV\nBAMTFmZvb2R2aWxsYS51cy5hdXRoMC5jb20wHhcNMjMwMjE4MDQyODQ3WhcNMzYx\nMDI3MDQyODQ3WjAhMR8wHQYDVQQDExZmb29kdmlsbGEudXMuYXV0aDAuY29tMIIB\nIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsqYgxelAzCU1gk8VLOGICTof\nNo+d1yiwQhhi4uxnWRWa+U2RjvjcK/cThCQqTg12uDRWv4DtTNimZSrjhrpY8vfl\nHrDvfRwARsudfxE8kVZmhpOgYbzYYyfqloD4m5geHS4XewTikYZxLH/SDHb9MHQu\nZHzXsx6frLa+8jE+MrB0Vwo2144D/k2eY4mamFjBjco5orCV70bUtLm4u7sP5bO9\nTpOxoGndcedn2Q4ikcz6alhDz1FGqI9AT63Fd8zPDrPVC5cKctVhZDUsXgA1EZxS\nP5ZFvAYXiDr6xcG7yEZrT3f23F7liFdQ3qsRtOe2/Dx1Qv0zVl0pLw1RXX1qAwID\nAQABo0IwQDAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBRITTZK1pn9oAxZ5TjC\nQzutkA/7TDAOBgNVHQ8BAf8EBAMCAoQwDQYJKoZIhvcNAQELBQADggEBAKUJWC3W\n3lszJZG/av7urj8O7F4ya/LFlTXYLeIZbLLB3fYOMNVpcro/tjS9zqHTpbFyKOD9\nbgnMIyrz4B0hjsdH1qXqpk6DpTgCcBr2qXNcilJpUXUqRXH2tyvwgNVooqolDQDg\nZJ3SLxpKdAScvRIsCHaSAvcjFrFsCaJ86o7ak3OlqlU+mSL/vzNVmmIabHvWLroP\nh67nWXUK4L6IngI1FiJCSBS4vlzHgUiJ8XbObRxYgYSi6AVWvlfrOzswpY9l4Jpu\nXVTIou2j8X7atLzvhlV0okwwssGFnqAL5cByXjuk/bRJ6cAfi2C7Y/hNIGKqHDsb\nSZTeM7pis7YTJSg=\n-----END CERTIFICATE-----"}'
      ## uncomment next line to run console offline (i.e load console assets from server instead of CDN)
      # HASURA_GRAPHQL_CONSOLE_ASSETS_DIR: /srv/console-assets
      ## uncomment next line to set an admin secret
      # HASURA_GRAPHQL_ADMIN_SECRET: myadminsecretkey
      # HASURA_GRAPHQL_JWT_SECRET: '{"type": "RS512", "key": "-----BEGIN CERTIFICATE-----\nMIIDBzCCAe+gAwIBAgIJXVcmVc2kG4H5MA0GCSqGSIb3DQEBCwUAMCExHzAdBgNV\nBAMTFmZvb2R2aWxsYS51cy5hdXRoMC5jb20wHhcNMjMwMjE4MDQyODQ3WhcNMzYx\nMDI3MDQyODQ3WjAhMR8wHQYDVQQDExZmb29kdmlsbGEudXMuYXV0aDAuY29tMIIB\nIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAsqYgxelAzCU1gk8VLOGICTof\nNo+d1yiwQhhi4uxnWRWa+U2RjvjcK/cThCQqTg12uDRWv4DtTNimZSrjhrpY8vfl\nHrDvfRwARsudfxE8kVZmhpOgYbzYYyfqloD4m5geHS4XewTikYZxLH/SDHb9MHQu\nZHzXsx6frLa+8jE+MrB0Vwo2144D/k2eY4mamFjBjco5orCV70bUtLm4u7sP5bO9\nTpOxoGndcedn2Q4ikcz6alhDz1FGqI9AT63Fd8zPDrPVC5cKctVhZDUsXgA1EZxS\nP5ZFvAYXiDr6xcG7yEZrT3f23F7liFdQ3qsRtOe2/Dx1Qv0zVl0pLw1RXX1qAwID\nAQABo0IwQDAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBRITTZK1pn9oAxZ5TjC\nQzutkA/7TDAOBgNVHQ8BAf8EBAMCAoQwDQYJKoZIhvcNAQELBQADggEBAKUJWC3W\n3lszJZG/av7urj8O7F4ya/LFlTXYLeIZbLLB3fYOMNVpcro/tjS9zqHTpbFyKOD9\nbgnMIyrz4B0hjsdH1qXqpk6DpTgCcBr2qXNcilJpUXUqRXH2tyvwgNVooqolDQDg\nZJ3SLxpKdAScvRIsCHaSAvcjFrFsCaJ86o7ak3OlqlU+mSL/vzNVmmIabHvWLroP\nh67nWXUK4L6IngI1FiJCSBS4vlzHgUiJ8XbObRxYgYSi6AVWvlfrOzswpY9l4Jpu\nXVTIou2j8X7atLzvhlV0okwwssGFnqAL5cByXjuk/bRJ6cAfi2C7Y/hNIGKqHDsb\nSZTeM7pis7YTJSg=\n-----END CERTIFICATE-----"}'
      WEBHOOK_URL: "http://localhost:3000"
volumes:
  db_data:

